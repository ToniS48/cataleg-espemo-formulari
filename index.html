<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESPEMO - Dashboard de Cavitats</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="container">
        <!-- Header con logos -->
        <div class="logo-principal">
            <img src="logoEspemo.png" alt="Logo ESPEMO" class="logo-main">
            <div>
                <h1>CATÀLEG ESPEMO</h1>
                <h2>Dashboard de Cavitats</h2>
            </div>
            <img src="espeleo1_BN.png" alt="Logo Espeleologia" class="logo-secondary-inline">
        </div>

        <!-- Barra de navegación -->
        <div class="navigation-bar">
            <div class="nav-section">
                <h3>📋 Gestió de Cavitats</h3>
                <button class="btn btn-primary" onclick="goToNewCavitat()">
                    ➕ Nova Cavitat
                </button>
                <button class="btn btn-secondary" onclick="goToEditCavitat()" id="editBtn" disabled>
                    ✏️ Editar Cavitat
                </button>
            </div>
            
            <div class="nav-section">
                <h3>🔧 Eines</h3>
                <button class="btn btn-success" onclick="exportData()">
                    📊 Exportar Dades
                </button>
                <button class="btn btn-info" onclick="openGoogleSheets()">
                    📋 Veure Sheets
                </button>
                <button class="btn btn-outline" onclick="openGitHub()">
                    🔗 GitHub
                </button>
            </div>
            
            <div class="nav-section">
                <h3>🗺️ Visualització</h3>
                <button class="btn btn-warning" onclick="openMap()" disabled>
                    🗺️ Mapa (Pròximament)
                </button>
                <button class="btn btn-outline" onclick="refreshData()">
                    🔄 Actualitzar
                </button>
            </div>
        </div>

        <!-- Panel de estadísticas -->
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-number" id="totalCavitats">--</div>
                <div class="stat-label">Cavitats</div>
                <div class="stat-icon">🏔️</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalMunicipis">--</div>
                <div class="stat-label">Municipis</div>
                <div class="stat-icon">🏘️</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalFotos">--</div>
                <div class="stat-label">Fotos</div>
                <div class="stat-icon">📷</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalTopos">--</div>
                <div class="stat-label">Topografies</div>
                <div class="stat-icon">📄</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalPozos">--</div>
                <div class="stat-label">Pozos</div>
                <div class="stat-icon">🕳️</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalSalas">--</div>
                <div class="stat-label">Salas</div>
                <div class="stat-icon">🏛️</div>
            </div>
        </div>

        <!-- Filtros de búsqueda -->
        <div class="filters-section">
            <div class="filters-row">
                <div class="filter-group">
                    <label for="filterMunicipi">Municipi:</label>
                    <select id="filterMunicipi">
                        <option value="">Tots els municipis</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="filterGenesisType">Gènesi:</label>
                    <select id="filterGenesisType">
                        <option value="">Totes les gènesis</option>
                        <option value="Kàrstica">Kàrstica</option>
                        <option value="Volcànica">Volcànica</option>
                        <option value="Tectònica">Tectònica</option>
                        <option value="Erosiva">Erosiva</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="filterMinProfunditat">Profunditat mín. (m):</label>
                    <input type="number" id="filterMinProfunditat" placeholder="0" min="0" step="1">
                </div>
                
                <div class="filter-group search-group">
                    <label for="searchText">Cerca:</label>
                    <input type="text" id="searchText" placeholder="Buscar per nom, codi, descripció...">
                </div>
                
                <div class="filter-group">
                    <button class="btn btn-outline" onclick="clearFilters()">🗑️ Netejar</button>
                </div>
            </div>
        </div>

        <!-- Lista de cavidades -->
        <div class="cavitats-section">
            <div class="section-header">
                <h3>📋 Llista de Cavitats</h3>
                <div class="view-controls">
                    <button class="btn btn-sm" id="viewToggle">⚏ Vista Grid</button>
                </div>
            </div>
            
            <div id="cavitatsContainer" class="cavitats-container list-view">
                <!-- Las cavidades se cargarán aquí dinámicamente -->
                <div class="loading-message">
                    <div class="spinner"></div>
                    <p>Carregant cavitats...</p>
                </div>
            </div>
        </div>

        <!-- Footer con información -->
        <div class="dashboard-footer">
            <p><strong>Última actualització:</strong> <span id="lastUpdate">--</span></p>
            <p><strong>Mode:</strong> <span id="dataMode">Dades mock locals</span></p>
            <button class="btn btn-small" onclick="toggleDataMode()" id="toggleModeBtn">
                🔄 Alternar Mode
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="api-config.js"></script>
    <script src="api-service.js"></script>
    <script src="data-mock.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>

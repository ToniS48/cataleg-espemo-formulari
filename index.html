<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESPEMO - Dashboard de Cavitats</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="container">
        <!-- Header con logos -->
        <div class="logo-principal">
            <img src="logoEspemo.png" alt="Logo ESPEMO" class="logo-main">
            <div>
                <h1>CATÃ€LEG ESPEMO</h1>
                <h2>Dashboard de Cavitats</h2>
            </div>
            <img src="espeleo1_BN.png" alt="Logo Espeleologia" class="logo-secondary-inline">
        </div>

        <!-- Barra de navegaciÃ³n -->
        <div class="navigation-bar">
            <div class="nav-section">
                <h3>ğŸ“‹ GestiÃ³ de Cavitats</h3>
                <button class="btn btn-primary" onclick="goToNewCavitat()">
                    â• Nova Cavitat
                </button>
                <button class="btn btn-secondary" onclick="goToEditCavitat()" id="editBtn" disabled>
                    âœï¸ Editar Cavitat
                </button>
            </div>
            
            <div class="nav-section">
                <h3>ğŸ”§ Eines</h3>
                <button class="btn btn-success" onclick="exportData()">
                    ğŸ“Š Exportar Dades
                </button>
                <button class="btn btn-info" onclick="openGoogleSheets()">
                    ğŸ“‹ Veure Sheets
                </button>
                <button class="btn btn-outline" onclick="openGitHub()">
                    ğŸ”— GitHub
                </button>
            </div>
            
            <div class="nav-section">
                <h3>ğŸ—ºï¸ VisualitzaciÃ³</h3>
                <button class="btn btn-warning" onclick="openMap()" disabled>
                    ğŸ—ºï¸ Mapa (PrÃ²ximament)
                </button>
                <button class="btn btn-outline" onclick="refreshData()">
                    ğŸ”„ Actualitzar
                </button>
            </div>
        </div>

        <!-- Panel de estadÃ­sticas -->
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-number" id="totalCavitats">--</div>
                <div class="stat-label">Cavitats</div>
                <div class="stat-icon">ğŸ”ï¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalMunicipis">--</div>
                <div class="stat-label">Municipis</div>
                <div class="stat-icon">ğŸ˜ï¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalFotos">--</div>
                <div class="stat-label">Fotos</div>
                <div class="stat-icon">ğŸ“·</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalTopos">--</div>
                <div class="stat-label">Topografies</div>
                <div class="stat-icon">ğŸ“„</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalPozos">--</div>
                <div class="stat-label">Pozos</div>
                <div class="stat-icon">ğŸ•³ï¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalSalas">--</div>
                <div class="stat-label">Salas</div>
                <div class="stat-icon">ğŸ›ï¸</div>
            </div>
        </div>

        <!-- Filtros de bÃºsqueda -->
        <div class="filters-section">
            <div class="filters-row">
                <div class="filter-group">
                    <label for="filterMunicipi">Municipi:</label>
                    <select id="filterMunicipi">
                        <option value="">Tots els municipis</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="filterGenesisType">GÃ¨nesi:</label>
                    <select id="filterGenesisType">
                        <option value="">Totes les gÃ¨nesis</option>
                        <option value="KÃ rstica">KÃ rstica</option>
                        <option value="VolcÃ nica">VolcÃ nica</option>
                        <option value="TectÃ²nica">TectÃ²nica</option>
                        <option value="Erosiva">Erosiva</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="filterMinProfunditat">Profunditat mÃ­n. (m):</label>
                    <input type="number" id="filterMinProfunditat" placeholder="0" min="0" step="1">
                </div>
                
                <div class="filter-group search-group">
                    <label for="searchText">Cerca:</label>
                    <input type="text" id="searchText" placeholder="Buscar per nom, codi, descripciÃ³...">
                </div>
                
                <div class="filter-group">
                    <button class="btn btn-outline" onclick="clearFilters()">ğŸ—‘ï¸ Netejar</button>
                </div>
            </div>
        </div>

        <!-- Lista de cavidades -->
        <div class="cavitats-section">
            <div class="section-header">
                <h3>ğŸ“‹ Llista de Cavitats</h3>
                <div class="view-controls">
                    <button class="btn btn-sm" id="viewToggle">âš Vista Grid</button>
                </div>
            </div>
            
            <div id="cavitatsContainer" class="cavitats-container list-view">
                <!-- Las cavidades se cargarÃ¡n aquÃ­ dinÃ¡micamente -->
                <div class="loading-message">
                    <div class="spinner"></div>
                    <p>Carregant cavitats...</p>
                </div>
            </div>
        </div>

        <!-- Footer con informaciÃ³n -->
        <div class="dashboard-footer">
            <p><strong>Ãšltima actualitzaciÃ³:</strong> <span id="lastUpdate">--</span></p>
            <p><strong>Mode:</strong> <span id="dataMode">Dades mock locals</span></p>
            <button class="btn btn-small" onclick="toggleDataMode()" id="toggleModeBtn">
                ğŸ”„ Alternar Mode
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="api-config.js"></script>
    <script src="api-service.js"></script>
    <script src="data-mock.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
